<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <title>Ejercicio: Generador de Factura</title>
    <style>
        body {
            font-family: 'Courier New', Courier, monospace;
            padding: 30px;
            background: #eee;
        }
        
        .factura {
            max-width: 600px;
            background: white;
            margin: 0 auto;
            padding: 20px;
            border: 1px solid #ccc;
            box-shadow: 5px 5px 15px rgba(0, 0, 0, 0.1);
        }
        
        h1 {
            text-align: center;
            border-bottom: 2px dashed #333;
            padding-bottom: 10px;
        }
        
        .datos-header {
            display: flex;
            justify-content: space-between;
            margin-bottom: 20px;
        }
        
        table {
            width: 100%;
            border-collapse: collapse;
            margin-bottom: 20px;
        }
        
        th {
            text-align: left;
            border-bottom: 2px solid #333;
        }
        
        td {
            padding: 8px 0;
            border-bottom: 1px solid #ddd;
        }
        
        .num {
            text-align: right;
        }
        
        .total-row {
            font-weight: bold;
            font-size: 1.1em;
        }
        
        .btn-container {
            text-align: center;
            margin-top: 20px;
        }
    </style>
</head>

<body>

    <div class="factura">
        <h1>TIENDA JS</h1>
        <div class="datos-header">
            <div>
                <strong>Cliente:</strong> Juan Pérez<br>
                <strong>NIF:</strong> 12345678Z
            </div>
            <div style="text-align: right;">
                <strong>Fecha:</strong> <span id="fecha-actual"></span><br>
                <strong>Factura Nº:</strong> A-2025/001
            </div>
        </div>

        <div id="tabla-items"></div>
    </div>

    <script>
        // Datos de entrada: Array de Objetos
        const carrito = [{
            id: 1,
            concepto: "Monitor 24 pulg.",
            precio: 150.00,
            cantidad: 2
        }, {
            id: 2,
            concepto: "Ratón inalámbrico",
            precio: 15.50,
            cantidad: 5
        }, {
            id: 3,
            concepto: "Teclado mecánico",
            precio: 45.00,
            cantidad: 1
        }, {
            id: 4,
            concepto: "Cable HDMI 2m",
            precio: 8.90,
            cantidad: 3
        }];

        const IVA = 0.21; // 21%

        function generarFactura() {
            // 1. Poner Fecha
            const opcionesFecha = {
                year: 'numeric',
                month: 'long',
                day: 'numeric'
            };
            document.getElementById("fecha-actual").innerText = new Date().toLocaleDateString('es-ES', opcionesFecha);

            // 2. Generar Tabla
            let html = `<table>
                        <thead>
                            <tr>
                                <th>Concepto</th>
                                <th class="num">Cant.</th>
                                <th class="num">Precio U.</th>
                                <th class="num">Total</th>
                            </tr>
                        </thead>
                        <tbody>`;

            let baseImponible = 0;

            carrito.forEach(item => {
                let totalLinea = item.precio * item.cantidad;
                baseImponible += totalLinea;

                html += `<tr>
                            <td>${item.concepto}</td>
                            <td class="num">${item.cantidad}</td>
                            <td class="num">${item.precio.toFixed(2)}€</td>
                            <td class="num">${totalLinea.toFixed(2)}€</td>
                         </tr>`;
            });

            // Cálculos finales
            let importeIVA = baseImponible * IVA;
            let totalPagar = baseImponible + importeIVA;

            html += `</tbody>
                     <tfoot>
                        <tr>
                            <td colspan="3" class="num"><strong>Base Imponible:</strong></td>
                            <td class="num">${baseImponible.toFixed(2)}€</td>
                        </tr>
                        <tr>
                            <td colspan="3" class="num">IVA (21%):</td>
                            <td class="num">${importeIVA.toFixed(2)}€</td>
                        </tr>
                        <tr class="total-row">
                            <td colspan="3" class="num">TOTAL A PAGAR:</td>
                            <td class="num">${totalPagar.toFixed(2)}€</td>
                        </tr>
                     </tfoot>
                     </table>`;

            document.getElementById("tabla-items").innerHTML = html;
        }

        generarFactura();
    </script>
</body>

</html>